<html>
<head>
  <title>Tic Tac Toe</title>
  <script defer src="https://use.fontawesome.com/releases/v5.0.1/js/all.js"></script>
  <link rel="stylesheet" type="text/css" href="tictac.css"/>
</head>
<body>
  <div id="wrapper">
    <div id="a1" class="tile"><span class="jsSymbol" id="js1"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html1"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="a2" class="tile"><span class="jsSymbol" id="js2"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html2"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="a3" class="tile"><span class="jsSymbol" id="js3"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html3"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="b1" class="tile"><span class="jsSymbol" id="js4"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html4"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="b2" class="tile"><span class="jsSymbol" id="js5"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html5"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="b3" class="tile"><span class="jsSymbol" id="js6"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html6"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="c1" class="tile"><span class="jsSymbol" id="js7"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html7"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="c2" class="tile"><span class="jsSymbol" id="js8"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html8"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="c3" class="tile"><span class="jsSymbol" id="js9"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html9"><i class="fab fa-html5 fa-7x"></i></span></div>
  </div>
  <div id="messageWrapper">
    <h1 align="center" id="pickYourClass">Pick Your Class</h1>
    <div id="jsClass"><span class="jsSymbolSpecial"><i class="fab fa-js-square fa-10x" id="jsSelector"></i></span></div>
    <div id="htmlClass"><span class="HTMLSymbolSpecial"><i class="fab fa-html5 fa-10x" id="htmlSelector"></i></span></div>
  </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script language="JavaScript">
  //declaring variables
  var classType, winner, best, moveVal, bestMoveRow, bestMoveCol, turn;
  var bestMove = [];
  var grid = [["-", "-", "-"], ["-", "-", "-"], ["-", "-", "-"]];
  var gridder = [];
  //on start, display the select icon screen
  $(document).ready(function() {
    $("#wrapper").hide();
  });
  //sets the player classtype depending on what the user clicked
  $("#jsClass").click(function() {
    classType = "j";
    classPicked();
  });
  $("#htmlClass").click(function() {
    classType = "h";
    classPicked();
  });
  //when class is picked, hide the icons
  function classPicked() {
    $("#messageWrapper").hide();
    $("#wrapper").show();
    $(".jsSymbol").hide();
    $(".HTMLSymbol").hide();
    /*if(Math.floor(Math.random()*2) == 0){
      turn = true;
    } else {
      turn = false;
    } */
    turn = true;
    driver(grid);
  }
  function playMoveAI(board){
    if(classType == "j"){
      board[bestMove[0]][bestMove[1]] = "h";
      console.log("hi");
      if(bestMove[0] == 0){
        if(bestMove[1] == 0){
          $("#html1").show();
        } else if(bestMove[1] == 1){
          $("#html2").show();
        } else if(bestMove[1] == 2){
          $("#html3").show();
        }
      } else if(bestMove[0] == 1){
        if(bestMove[1] == 0){
          $("#html4").show();
        } else if(bestMove[1] == 1){
          $("#html5").show();
        } else if(bestMove[1] == 2){
          $("#html6").show();
        }
      } else if(bestMove[0] == 2){
        if(bestMove[1] == 0){
          $("#html7").show();
        }else if(bestMove[1] == 1){
          $("#html8").show();
        }else if(bestMove[1] == 2){
          $("#html9").show();
        }
      }
    } else if(classType == "h"){
      board[bestMove[0]][bestMove[1]] = "j";
      if(bestMove[0] == 0){
        if(bestMove[1] == 0){
          $("#js1").show();
        } else if(bestMove[1] == 1){
          $("#js2").show();
        } else if(bestMove[1] == 2){
          $("#js3").show();
        }
      } else if(bestMove[0] == 1){
        if(bestMove[1] == 0){
          $("#js4").show();
        } else if(bestMove[1] == 1){
          $("#js5").show();
        } else if(bestMove[1] == 2){
          $("#js6").show();
        }
      } else if(bestMove[0] == 2){
        if(bestMove[1] == 0){
          $("#js7").show();
        } else if(bestMove[1] == 1){
          $("#js8").show();
        } else if(bestMove[1] == 2){
          $("#js9").show();
        }
      }
    }
    console.log(JSON.stringify(board));
  }
  //check each direction for a winner
  function evaluate(board) {
    //check horizonatals
    for (var i = 0; i < 3; i++) {
      if (
        board[i][0] == board[i][1] &&
        board[i][1] == board[i][2] &&
        board[i][0] != "-"
      ) {
        if(board[i][0] == "h"){
          if(classType == "h"){
            return -10;
          } else {
            return 10;
          }
        } else if (board[i][0] == "j"){
          if(classType == "j"){
            return -10;
          } else {
            return 10;
          }
        }
    }
  }
    //check verticals
    for (var i = 0; i < 3; i++) {
      if (
        board[0][i] == board[1][i] &&
        board[1][i] == board[2][i] &&
        board[0][i] != "-"
      ) {
        if(board[0][i] == "h"){
          if(classType == "h"){
            return -10;
          } else {
            return 10;
          }
        } else if (board[0][i] == "j"){
          if(classType == "j"){
            return -10;
          } else {
            return 10;
          }
        }
      }
    }
    //check diagonals
    if (
      (board[0][0] == board[1][1] && board[1][1] == board[2][2] && board[1][1]!="-") ||
      (board[0][2] == board[1][1] && board[1][1] == board[2][0] && board[1][1]!="-")
    ) {
      if(board[1][1] == "h"){
        if(classType == "h"){
          return -10;
        } else {
          return 10;
        }
      } else if (board[1][1] == "j"){
        if(classType == "j"){
          return -10;
        } else {
          return 10;
        }
      }
    }
  }
  //checks to see if the current board is full
  function movesRemaning(board) {
  for (var i = 0; i < 3; i++) {
    for (var j = 0; j < 3; j++) {
      if (board[i][j] == "-") {
        return true;
      }
    }
  }
    return false;
  }
  function randomMove(board){
    var x = Math.floor(Math.random()*3);
    var y = Math.floor(Math.random()*3);
    if(board[x][y] == "-"){
      bestMoveRow = y;
      bestMoveCol = x;
    } else {
      randomMove(board);
    }
  }
  //checks all squares to see move value
  function findBestMove(board) {
    bestMoveRow = -1;
    bestMoveCol = -1;
    for(var i=0; i<3; i++){
      for(var j=0; j<3; j++){
        if(board[i][j] == "-"){
          if(classType == "h"){
            board[i][j] = "j";
            if(evaluate(board) == 10 || evaluate(board) == -10){
              bestMoveRow = j;
              bestMoveCol = i;
              board[i][j] = "-";
              break;
            }
            board[i][j] = "-";
          } else if (classType == "j"){
            board[i][j] = "h";
            if(evaluate(board) == 10 || evaluate(board) == -10){
              bestMoveRow = j;
              bestMoveCol = i;
              board[i][j] = "-";
              break;
            }
            board[i][j] = "-";
          }
        }
      }
      if(bestMoveRow == -1){
        for(var i=0; i<3; i++){
          for(var j=0; j<3; j++){
            if(board[i][j] == "-"){
              if(classType == "h"){
                board[i][j] = "j";
                if(evaluate(board) == 10 || evaluate(board) == -10){
                  bestMoveRow = j
                  bestMoveCol = i;
                  board[i][j] = "-";
                  break;
                }
                board[i][j] = "-";
              } else if (classType == "j"){
                board[i][j] = "h";
                if(evaluate(board) == 10 || evaluate(board) == -10){
                  bestMoveRow = j
                  bestMoveCol = i;
                  board[i][j] = "-";
                  break;
                }
                board[i][j] = "-";
              }
            }
          }
        }
      }
      if(bestMoveRow == -1){
        randomMove(board);
      }
    }
    bestMove[0] = bestMoveRow;
    bestMove[1] = bestMoveCol;
    return bestMove;
  }
  //code to run tests on the algorithm. Does not actually pertain to the game itself
  function driver(board) {
    console.log(turn);
    if(turn){
      findBestMove(grid);
      console.log(bestMove);
      playMoveAI(grid);
      turn = false;
      driver(board);
    } else {
      $("#a1").click(function(){
        if(board[0][0] == "-"){
          if(classType == "j"){
            board[0][0] = "j";
            $("#js1").show();
          }else if(classType == "h"){
            board[0][0] = "h";
            $("#html1").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#a2").click(function(){
        if(board[0][1] == "-"){
          if(classType == "j"){
            board[0][1] = "j";
            $("#js2").show();
          }else if(classType == "h"){
            board[0][1] = "h";
            $("#html2").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#a3").click(function(){
        if(board[0][2] == "-"){
          if(classType=="j"){
            board[0][2] = "j";
            $("#js3").show();
          }else if(classType == "h"){
            board[0][2] = "h";
            $("#html3").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#b1").click(function() {
        if(board[1][0] == "-"){
          if(classType == "j"){
            board[1][0] = "j";
            $("#js4").show();
          }else if(classType == "h"){
            board[1][0] = "h";
            $("#html4").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#b2").click(function(){
        if(board[1][1] == "-"){
          if(classType== "j"){
            board[1][1] = "j";
            $("#js5").show();
          }else if(classType == "h"){
            board[1][1] = "h";
            $("#html5").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#b3").click(function(){
        if(board[1][2] == "-"){
          if(classType == "j"){
            board[1][2] = "j";
            $("#js6").show();
          }else if(classType == "h"){
            board[1][2] = "h";
            $("#html6").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#c1").click(function(){
        if(board[2][0] == "-"){
          if(classType == "j"){
            board[2][0] = "j";
            $("#js7").show();
          }else if(classType == "h"){
            board[2][0] = "h";
            $("#html7").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#c2").click(function(){
        if(board[2][1] == "-"){
          if(classType == "j"){
            board[2][1] = "j";
            $("#js8").show();
          }else if(classType == "h"){
            board[2][1] = "h";
            $("#html8").show();
          }
          turn = true;
          driver(board);
        }
      });
      $("#c3").click(function(){
        if(board[2][2] == "-"){
          if(classType == "j"){
            board[2][2] = "j";
            $("#js9").show();
          }else if(classType == "h"){
            board[2][2] = "h";
            $("#html9").show();
          }
          turn = true;
          driver(board);
        }
      });
    }
  }
</script>
</html>
