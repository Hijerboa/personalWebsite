<html>
<head>
  <title>Tic Tac Toe</title>
  <script defer src="https://use.fontawesome.com/releases/v5.0.1/js/all.js"></script>
  <link rel="stylesheet" type="text/css" href="tictac.css"/>
</head>
<body>
  <div id="wrapper">
    <div id="a1" class="tile"><span class="jsSymbol" id="js1"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html1"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="a2" class="tile"><span class="jsSymbol" id="js2"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html2"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="a3" class="tile"><span class="jsSymbol" id="js3"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html3"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="b1" class="tile"><span class="jsSymbol" id="js4"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html4"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="b2" class="tile"><span class="jsSymbol" id="js5"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html5"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="b3" class="tile"><span class="jsSymbol" id="js6"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html6"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="c1" class="tile"><span class="jsSymbol" id="js7"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html7"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="c2" class="tile"><span class="jsSymbol" id="js8"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html8"><i class="fab fa-html5 fa-7x"></i></span></div>
    <div id="c3" class="tile"><span class="jsSymbol" id="js9"><i class="fab fa-js-square fa-7x"></i></span><span class="HTMLSymbol" id="html9"><i class="fab fa-html5 fa-7x"></i></span></div>
  </div>
  <div id="messageWrapper">
    <h1 align="center" id="pickYourClass">Pick Your Class</h1>
    <div id="jsClass"><span class="jsSymbol"><i class="fab fa-js-square fa-10x"></i></span></div>
    <div id="htmlClass"><span class="HTMLSymbol"><i class="fab fa-html5 fa-10x"></i></span></div>
  </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script language="JavaScript">
  //declaring variables
  var classType, winner, best, moveVal, bestMoveRow, bestMoveCol;
  var bestMove = [];
  var grid = [
    ["-","-","-"],
    ["-","-","-"],
    ["-","-","-"]
  ];
  //on start, display the select icon screen
  $(document).ready(function() {
    $("#wrapper").hide();
    console.log(grid);
    evaluate(grid);
  });
  //when class is picked, hide the icons
  function classPicked(){
    $("#messageWrapper").hide();
    $("#wrapper").show();
    $(".jsSymbol").hide();
    $(".HTMLSymbol").hide();
    driver();
  }
  //check each direction for a winner
  function evaluate(board){
    checkHorizontals(board);
    checkVerticals(board);
    checkDiagonals(board);
  }
  //checks horizonatals
  function checkHorizontals(board){
    for(i=0; i<3; i++){
      if((board[i][0] == board[i][1]) && (board[i][1] == board[i][2]) && (board[i][0] != "-")){
        if(board[i][0] == "j"){
          if(classType == "html"){
            return -10;
          } else {
            return 10;
          }
        } else if (board[i][0] == "h"){
          if(classType == "html"){
            return 10;
          } else {
            return -10;
          }
        }
      }
    }
  }
  //checks verticals
  function checkVerticals(board){
    for(i=0; i<3; i++){
      if((board[0][i] == board[1][i]) && (board[1][i] == board[2][i]) && (board[0][i] != "-")){
        if(board[0][i] == "j"){
          if(classType == "html"){
            return -10;
          } else {
            return 10;
          }
        } else if(board[0][i] == "h"){
          if(classType == "html"){
            return 10;
          } else {
            return -10;
          }
        }
      }
    }
  }
  //checks Diagonals
  function checkDiagonals(board){
    if(((board[0][0] == board[1][1]) && (board[1][1] == board[2][2])) || ((board[0][2] == board[1][1]) && (board[1][1] == board[2][0]))){
      if(board[1][1] == "h"){
        if(classType == "html"){
          return 10;
        } else {
          return -10;
        }
      }else if (board[1][1] == "j"){
        if(classType == "html"){
          return -10;
        } else {
          return 10;
        }
      }
      console.log(winner);
    }
  }
  //checks to see if the current board is full
  function movesRemaning(board){
    for(i=0;i<3;i++){
      for(j=0;j<3;j++){
        if(board[i][j] == "-"){
          return true;
        }
      }
    }
    return false;
  }
  //sets the player classtype depending on what the user clicked
  $("#jsClass").click(function(){
    classType = "js";
    classPicked();
  });
  $("#htmlClass").click(function(){
    classType = "html";
    classPicked();
  });
  //checks the minmax of a given board
  function minMax(board, depth, isMax){
    score = evaluate(board);
    //if the player wins, add depth, assign score
    if(score == -10){
      return (-10 + depth);
    }
    //if the computer wins, subtract depth, add score. Higher scores are better
    if(score == 10){
      return (10 - depth);
    }
    //checks to see if there are moves remaning, if there is a tie, return zero
    if(movesRemaning(board) === false){
      return 0;
    }
    //if is computer, run this, and play on the squares
    if(isMax){
      best = -1000;
      for(i=0; i<3; i++){
        //console.log(i);
        for(j=0; j<3; j++){
          //console.log(j);
          if(board[i][j]=="-"){
            if(classType == "js"){
              board[i][j] = "h";
            } else if (classType == "html"){
              board[i][j] = "j";
            }
            best = Math.max(best, minMax(board, depth++, !isMax));
            board[i][j] = "-";
          }
        }
      }
      //if player, run this, and play on the squares
    } else {
      best = 1000;
      for(i=0; i<3; i++){
        for(j=0; j<3; j++){
          if(board[i][j] == "j"){
            if(classType == "js"){
              board[i][j] = "j";
            } else if (classType == "html"){
              board[i][j] = "h";
            }
              best = Math.min(best, minMax(board, depth++, !isMax));
              board[i][j] = "-";
          }
        }
      }
    }
  }
  //checks all squares to see move value
   function findBestMove(board){
    bestVal = -1000;
    bestMoveRow = -1;
    bestMoveCol = -1;
    for(i=0; i<3; i++){
      for(j=0; j<3; j++){
        if(board[i][j] == "-"){
          if(classType == "js"){
            board[i][j] = "h";
          } else if (classType == "html"){
            board[i][j] = "j";
          }
          moveVal = minMax(board, 0, false);
          board[i][j] = "-";
          if(moveVal > bestVal){
            bestMoveRow = i;
            bestMoveCol = j;
            bestVal = moveVal;
          }
        }
      }
    }
    bestMove[0] = bestMoveRow;
    bestMove[1] = bestMoveCol;
    return bestMove;
  }
  //code to run tests on the algorithm. Does not actually pertain to the game itself
  function driver(){
    var gridder = [
      ["h", "j", "j"],
      ["j", "j", "h"],
      ["-", "-", "-"]
    ];
    bestMove = findBestMove(gridder);
    console.log("Row: " + bestMove[0] + " Col: " + bestMove[1]);
  }
</script>
</html>
